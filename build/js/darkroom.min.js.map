{"version":3,"file":"build/js/darkroom.min.js","sources":["build/lib/js/darkroom.js","build/lib/js/plugins/darkroom.history.js","build/lib/js/plugins/darkroom.rotate.js","build/lib/js/plugins/darkroom.crop.js","build/lib/js/plugins/darkroom.save.js"],"names":["window","document","fabric","extend","b","a","prop","undefined","hasOwnProperty","Darkroom","element","options","plugins","this","init","Plugin","darkroom","defaults","initialize","Toolbar","actionsElement","querySelector","ButtonGroup","Button","prototype","protoProps","child","parent","constructor","apply","arguments","Surrogate","__super__","createButtonGroup","buttonGroup","createElement","className","appendChild","createButton","image","type","group","hide","disabled","button","innerHTML","disable","addEventListener","eventName","callback","el","attachEvent","active","value","classList","add","remove","Canvas","util","createClass","minWidth","minHeight","maxWidth","maxHeight","canvas","getElement","dispatchEvent","event","createEvent","initEvent","_this","Image","onload","createFabricImage","initDOM","initPlugins","bind","call","src","toolbar","canvasContainer","container","parentNode","replaceChild","selection","backgroundColor","setWidth","getWidth","setHeight","getHeight","centerObject","setCoords","imgElement","width","height","scaleMin","scaleMax","scaleX","scaleY","Math","min","max","scale","selectable","evented","lockMovementX","lockMovementY","lockRotation","lockScalingX","lockScalingY","lockUniScaling","hasControls","hasBorders","setScaleX","setScaleY","name","plugin","getPlugin","selfDestroy","snapshotImage","toDataURL","_initButtons","backHistoryStack","forwardHistoryStack","_snapshotImage","_onImageChange","goBack","length","push","currentImage","pop","_applyImage","_updateButtons","goForward","backButton","forwardButton","imgInstance","leftButton","rightButton","rotateLeft","rotateRight","rotate","angle","getAngle","abs","sin","PI","cos","renderAll","CropZone","Rect","_render","ctx","callSuper","dashWidth","flipX","flipY","fillStyle","_renderOverlay","setLineDash","mozDash","strokeStyle","_renderBorders","_renderGrid","lineDashOffset","borderOffset","x0","ceil","getLeft","x1","x2","x3","y0","getTop","y1","y2","y3","fillRect","beginPath","moveTo","lineTo","stroke","startX","startY","isKeyCroping","isKeyLeft","isKeyUp","ratio","quickCropKey","cropButton","okButton","cancelButton","toggleCrop","cropCurrentZone","releaseFocus","on","onMouseDown","onMouseMove","onMouseUp","onObjectMoving","onObjectScaling","addListener","onKeyDown","onKeyUp","hasFocus","currentObject","target","cropZone","x","y","w","h","maxX","maxY","set","preventScaling","pointer","getPointer","e","minX","minY","lastScaleX","setLeft","lastScaleY","setTop","scaleToWidth","scaleToHeight","getScaleX","getScaleY","calcOffset","point","Point","activeObject","getActiveObject","containsPoint","discardActiveObject","onMouseMoveKeyCrop","_renderCropZone","zone","left","top","setActiveObject","keyCode","selectZone","forceDimension","requireFocus","bringToFront","visible","fill","originX","originY","cornerColor","cornerSize","transparentCorners","hasRotatingPoint","defaultCursor","fromX","fromY","toX","toY","isRight","isLeft","isDown","isUp","leftX","rightX","topY","bottomY","currentRatio","newWidth","newHeight","destroyButton"],"mappings":"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"}